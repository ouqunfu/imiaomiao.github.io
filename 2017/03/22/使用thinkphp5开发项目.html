<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用thinkphp5开发项目 | 麦高稻香的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="LNMP下使用Thinkphp5框架开发项目都说tp5与之前版本大变样了，使用起来跟3.x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳">
<meta property="og:type" content="article">
<meta property="og:title" content="使用thinkphp5开发项目">
<meta property="og:url" content="http://github.ouqunfu.com/2017/03/22/使用thinkphp5开发项目.html">
<meta property="og:site_name" content="麦高稻香的博客">
<meta property="og:description" content="LNMP下使用Thinkphp5框架开发项目都说tp5与之前版本大变样了，使用起来跟3.x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳">
<meta property="og:updated_time" content="2017-03-24T09:38:33.593Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用thinkphp5开发项目">
<meta name="twitter:description" content="LNMP下使用Thinkphp5框架开发项目都说tp5与之前版本大变样了，使用起来跟3.x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳">
  
    <link rel="alternate" href="/atom.xml" title="麦高稻香的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">麦高稻香的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">专注于Web、PHP、服务器、软件架构</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://github.ouqunfu.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-使用thinkphp5开发项目" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/使用thinkphp5开发项目.html" class="article-date">
  <time datetime="2017-03-23T06:40:09.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      使用thinkphp5开发项目
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="LNMP下使用Thinkphp5框架开发项目"><a href="#LNMP下使用Thinkphp5框架开发项目" class="headerlink" title="LNMP下使用Thinkphp5框架开发项目"></a>LNMP下使用Thinkphp5框架开发项目</h3><h4 id="都说tp5与之前版本大变样了，使用起来跟3-x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习"><a href="#都说tp5与之前版本大变样了，使用起来跟3-x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习" class="headerlink" title="都说tp5与之前版本大变样了，使用起来跟3.x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习"></a>都说tp5与之前版本大变样了，使用起来跟3.x版本区别也是很大的，简单的，目录结构就不一样了，数据库查询原来的M函数调用，改用db函数等等。那么使用框架也要重新学习</h4><h4 id="按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的"><a href="#按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的" class="headerlink" title="按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的"></a>按照以往习惯，使用一个框架，那么最好的方式就是用它来开发项目，这样上手是最快的</h4><h3 id="首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳转，控制器跳转，模板标签使用等等，这些内容熟悉了，对于项目开发来说基本够用了。"><a href="#首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳转，控制器跳转，模板标签使用等等，这些内容熟悉了，对于项目开发来说基本够用了。" class="headerlink" title="首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳转，控制器跳转，模板标签使用等等，这些内容熟悉了，对于项目开发来说基本够用了。"></a>首先肯定是看框架开发手册，接着按照目录结构搭建自己的项目，自己动手把基本的curd写写，模板渲染，表单提交，页面跳转，控制器跳转，模板标签使用等等，这些内容熟悉了，对于项目开发来说基本够用了。</h3><h3 id="1、-基本的curd"><a href="#1、-基本的curd" class="headerlink" title="1、 基本的curd"></a>1、 基本的curd</h3><h4 id="这里偷懒，就不新建模块了，直接在框架自带默认的Index模板写增删改查方法-代码如下："><a href="#这里偷懒，就不新建模块了，直接在框架自带默认的Index模板写增删改查方法-代码如下：" class="headerlink" title="这里偷懒，就不新建模块了，直接在框架自带默认的Index模板写增删改查方法,代码如下："></a>这里偷懒，就不新建模块了，直接在框架自带默认的Index模板写增删改查方法,代码如下：</h4><pre><code>&lt;?php
/**
* 测试相关
*/
namespace app\index\controller;
use think\Db;
use think\Request;
use think\Session;

class Index extends \think\Controller
{
    public function __construct(){
        parent::__construct();
    }

    public function index()
    {
        return &apos;&lt;style type=&quot;text/css&quot;&gt;*{ padding: 0; margin: 0; } .think_default_text{ padding: 4px 48px;} a{color:#2E5CD5;cursor: pointer;text-decoration: none} a:hover{text-decoration:underline; } body{ background: #fff; font-family: &quot;Century Gothic&quot;,&quot;Microsoft yahei&quot;; color: #333;font-size:18px} h1{ font-size: 100px; font-weight: normal; margin-bottom: 12px; } p{ line-height: 1.6em; font-size: 42px }&lt;/style&gt;&lt;div style=&quot;padding: 24px 48px;&quot;&gt; &lt;h1&gt;:)&lt;/h1&gt;&lt;p&gt; ThinkPHP V5&lt;br/&gt;&lt;span style=&quot;font-size:30px&quot;&gt;十年磨一剑 - 为API开发设计的高性能框架&lt;/span&gt;&lt;/p&gt;&lt;span style=&quot;font-size:22px;&quot;&gt;[ V5.0 版本由 &lt;a href=&quot;http://www.qiniu.com&quot; target=&quot;qiniu&quot;&gt;七牛云&lt;/a&gt; 独家赞助发布 ]&lt;/span&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;http://tajs.qq.com/stats?sId=9347272&quot; charset=&quot;UTF-8&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;http://ad.topthink.com/Public/static/client.js&quot;&gt;&lt;/script&gt;&lt;thinkad id=&quot;ad_bd568ce7058a1091&quot;&gt;&lt;/thinkad&gt;&apos;;
    }

    /**-------------tp5增删改查示例代码-------------------**/

    //增加
    public function add(){

        $data[&apos;username&apos;] = &apos;admin&apos;;
        $data[&apos;password&apos;] = &apos;admin&apos;;
        $data[&apos;create_time&apos;] = md5(&apos;123456&apos;);
        db(&apos;user&apos;)-&gt;insert($data);

    }

    //查询
    public function select(){

        $user_info = db(&apos;user&apos;)-&gt;field(&quot;*&quot;)-&gt;where(&apos;id&apos;,2)-&gt;find();
        dump($user_info);
    }

    //修改
    public function update(){

        $data[&apos;password&apos;] = md5(md5(&apos;123456&apos;).config(&apos;encryption_factor_str&apos;));
        $data[&apos;create_time&apos;] = time();
        $res = db(&apos;user&apos;)-&gt;where(&apos;id&apos;,2)-&gt;update($data);
        dump($res);
    }

    //删除
    public function delete(){

        $res= db(&apos;user&apos;)-&gt;where(&apos;id&apos;,2)-&gt;delete();
        dump($res);
    }

    //获取配置
    public function getConfig(){
        //所有配置
        config();
        //加密因子
        dump(config(&apos;encryption_factor_str&apos;)); 
    }


    //页面
    public function page(){

        return $this-&gt;fetch(&apos;page&apos;);
    }

    //页面请求处理
    public function doRequest(){

        //$request = Request::instance();
        //使用助手函数
        $request = request();
        echo &quot;当前模块名称是&quot; . $request-&gt;module();
        echo &quot;当前控制器名称是&quot; . $request-&gt;controller();
        echo &quot;当前操作名称是&quot; . $request-&gt;action();

        // 获取当前请求的所有变量（经过过滤）
        $input = $request-&gt;param();

        dump($input);
        dump(input());
        echo $input[&apos;param3&apos;];
        echo input(&apos;param1&apos;);
    }

    //session 和 cache 处理
    public function sesseionAndCache(){

        //设置
        Session::set(&apos;name&apos;,&apos;thinkphp&apos;);
        //获取
        echo Session::get(&apos;name&apos;);
        //清空
        Session::clear();
        echo &apos;值是否清除==&apos;.Session::get(&apos;name&apos;);
    }
}
</code></pre><h4 id="这里需要注意的是使用db，要使用命名空间导入db类，增加”use-think-Db-”这行代码-还有请求处理同样如此，增加”use-think-Request-”。"><a href="#这里需要注意的是使用db，要使用命名空间导入db类，增加”use-think-Db-”这行代码-还有请求处理同样如此，增加”use-think-Request-”。" class="headerlink" title="这里需要注意的是使用db，要使用命名空间导入db类，增加”use think\Db;”这行代码,还有请求处理同样如此，增加”use think\Request;”。"></a>这里需要注意的是使用db，要使用命名空间导入db类，增加”use think\Db;”这行代码,还有请求处理同样如此，增加”use think\Request;”。</h4><h4 id="另外这里还增加session操作的方法，如果项目涉及登录功能的话，是要用到的。"><a href="#另外这里还增加session操作的方法，如果项目涉及登录功能的话，是要用到的。" class="headerlink" title="另外这里还增加session操作的方法，如果项目涉及登录功能的话，是要用到的。"></a>另外这里还增加session操作的方法，如果项目涉及登录功能的话，是要用到的。</h4><h4 id="输入变量过滤可以在config-php文件中配置，也可以在接收时再多虑。"><a href="#输入变量过滤可以在config-php文件中配置，也可以在接收时再多虑。" class="headerlink" title="输入变量过滤可以在config.php文件中配置，也可以在接收时再多虑。"></a>输入变量过滤可以在config.php文件中配置，也可以在接收时再多虑。</h4><h4 id="项目源码托管在github-简易记账系统"><a href="#项目源码托管在github-简易记账系统" class="headerlink" title="项目源码托管在github 简易记账系统"></a>项目源码托管在github <a href="https://github.com/ouqunfu/accounts" target="_blank" rel="external">简易记账系统</a></h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://github.ouqunfu.com/2017/03/22/使用thinkphp5开发项目.html" data-id="cj0nmxct00005kipvaq9y0ape" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/03/22/mirrors.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          国内开源镜像mirrors
        
      </div>
    </a>
  
  
    <a href="/2017/03/22/搭建LNMP环境.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">搭建LNMP环境</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/22/Dependent-依赖.html">Dependent-依赖</a>
          </li>
        
          <li>
            <a href="/2017/03/22/Linux下使用Hexo搭建github博客.html">Linux下使用Hexo搭建github博客</a>
          </li>
        
          <li>
            <a href="/2017/03/22/centos下安装编译安装git-2.3.0.html">centos下安装编译安装git-2.3.0</a>
          </li>
        
          <li>
            <a href="/2017/03/22/lnmp下部署thinkphp5项目.html">lnmp下部署thinkphp5项目</a>
          </li>
        
          <li>
            <a href="/2017/03/22/mirrors.html">国内开源镜像mirrors</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 麦高稻香<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>