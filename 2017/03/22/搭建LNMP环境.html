
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>搭建LNMP环境 | 麦高稻香的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="麦高稻香">
    

    
    <meta name="description" content="LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo等。Nginx是一个高性能的HTTP和反向代理服务器，也是一个IMAP/POP3/SMTP代理服务器。Mysql是一个小型关系型数据库管理系统。PHP是一种在服">
<meta property="og:type" content="article">
<meta property="og:title" content="搭建LNMP环境">
<meta property="og:url" content="http://github.ouqunfu.com/2017/03/22/搭建LNMP环境.html">
<meta property="og:site_name" content="麦高稻香的博客">
<meta property="og:description" content="LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo等。Nginx是一个高性能的HTTP和反向代理服务器，也是一个IMAP/POP3/SMTP代理服务器。Mysql是一个小型关系型数据库管理系统。PHP是一种在服">
<meta property="og:updated_time" content="2017-03-24T09:38:22.753Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="搭建LNMP环境">
<meta name="twitter:description" content="LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo等。Nginx是一个高性能的HTTP和反向代理服务器，也是一个IMAP/POP3/SMTP代理服务器。Mysql是一个小型关系型数据库管理系统。PHP是一种在服">

    
    <link rel="alternative" href="/atom.xml" title="麦高稻香的博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="麦高稻香的博客" title="麦高稻香的博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="麦高稻香的博客">麦高稻香的博客</a></h1>
				<h2 class="blog-motto">专注于Web、PHP、服务器、软件架构</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:github.ouqunfu.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/03/22/搭建LNMP环境.html" title="搭建LNMP环境" itemprop="url">搭建LNMP环境</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="麦高稻香" target="_blank" itemprop="author">麦高稻香</a>
		
  <p class="article-time">
    <time datetime="2017-03-23T06:40:09.000Z" itemprop="datePublished"> 发表于 2017-03-22</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、centos-6-5-X86-64-VMware下编译安装搭建lnmp，架构web环境"><span class="toc-number">1.</span> <span class="toc-text">1、centos 6.5 X86_64 VMware下编译安装搭建lnmp，架构web环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#（1）检查编译安装环境"><span class="toc-number">1.1.</span> <span class="toc-text">（1）检查编译安装环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-查看httpd、mysql、php是否安装"><span class="toc-number">1.1.1.</span> <span class="toc-text"> #查看httpd、mysql、php是否安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-q-httpd-mysql-php"><span class="toc-number">1.1.2.</span> <span class="toc-text"> [root@localhost ~]#rpm -q httpd mysql php</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-如果已安装则卸载"><span class="toc-number">1.1.3.</span> <span class="toc-text"> #如果已安装则卸载:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-e-httpd-–nodeps"><span class="toc-number">1.1.4.</span> <span class="toc-text"> [root@localhost ~]#rpm -e httpd –nodeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-e-mysql-–nodeps"><span class="toc-number">1.1.5.</span> <span class="toc-text"> [root@localhost ~]#rpm -e mysql –nodeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-e-php-–nodeps"><span class="toc-number">1.1.6.</span> <span class="toc-text"> [root@localhost ~]#rpm -e php –nodeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-删除相关文件"><span class="toc-number">1.1.7.</span> <span class="toc-text"> #删除相关文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-find-name-php-mysql-nginx"><span class="toc-number">1.1.8.</span> <span class="toc-text"> find / -name php mysql nginx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-rm-rf"><span class="toc-number">1.1.9.</span> <span class="toc-text"> rm -rf *</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（2）安装解决依赖关系"><span class="toc-number">1.2.</span> <span class="toc-text">（2）安装解决依赖关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（3）安装mysql-5-5-53"><span class="toc-number">1.3.</span> <span class="toc-text">（3）安装mysql-5.5.53</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（4）安装php的扩展库：libiconv"><span class="toc-number">1.4.</span> <span class="toc-text">（4）安装php的扩展库：libiconv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（5）安装php扩展库：libmcrypt"><span class="toc-number">1.5.</span> <span class="toc-text">（5）安装php扩展库：libmcrypt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注：这里不要退出去了。"><span class="toc-number">1.5.1.</span> <span class="toc-text">注：这里不要退出去了。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（6）-安装php扩展库：mhash"><span class="toc-number">1.6.</span> <span class="toc-text">（6） 安装php扩展库：mhash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（7）-做库的软连接："><span class="toc-number">1.7.</span> <span class="toc-text">（7） 做库的软连接：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-安装php扩展包：mcrypt"><span class="toc-number">1.8.</span> <span class="toc-text">(8) 安装php扩展包：mcrypt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-安装php-5-4-21："><span class="toc-number">1.9.</span> <span class="toc-text">(9) 安装php-5.4.21：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-安装php扩展库：memcache"><span class="toc-number">1.10.</span> <span class="toc-text">(10) 安装php扩展库：memcache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-安装php加速：eaccelerator"><span class="toc-number">1.11.</span> <span class="toc-text">(11) 安装php加速：eaccelerator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（12）-修改php-ini增加memcache-ea等软件信息"><span class="toc-number">1.12.</span> <span class="toc-text">（12） 修改php.ini增加memcache,ea等软件信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（13）安装php扩展库-PDO-MYSQL"><span class="toc-number">1.13.</span> <span class="toc-text">（13）安装php扩展库:PDO_MYSQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（14）安装ImageMagick服务"><span class="toc-number">1.14.</span> <span class="toc-text">（14）安装ImageMagick服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（15）安装php扩展库：imagick"><span class="toc-number">1.15.</span> <span class="toc-text">（15）安装php扩展库：imagick</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（16）添加WWW用户，为系统运行nginx专用用户："><span class="toc-number">1.16.</span> <span class="toc-text">（16）添加WWW用户，为系统运行nginx专用用户：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（17）修改php-fpm-conf的配置："><span class="toc-number">1.17.</span> <span class="toc-text">（17）修改php-fpm.conf的配置：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#去掉-更改-配置文件中的"><span class="toc-number">1.17.1.</span> <span class="toc-text">去掉/更改 配置文件中的;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检查语法是否正确"><span class="toc-number">1.17.2.</span> <span class="toc-text">检查语法是否正确</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（18）-添加环境变量："><span class="toc-number">1.18.</span> <span class="toc-text">（18） 添加环境变量：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（19）安装nginx的-pcre"><span class="toc-number">1.19.</span> <span class="toc-text">（19）安装nginx的 pcre</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（20）编译安装-nginx"><span class="toc-number">1.20.</span> <span class="toc-text">（20）编译安装 nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（21）修改nginx配置文件"><span class="toc-number">1.21.</span> <span class="toc-text">（21）修改nginx配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（22）写一个php的测试文件：phpinfo"><span class="toc-number">1.22.</span> <span class="toc-text">（22）写一个php的测试文件：phpinfo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（23）添加开机启动"><span class="toc-number">1.23.</span> <span class="toc-text">（23）添加开机启动:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（24）启动nginx-启动php-fpm-开放防火墙iptables-80端口"><span class="toc-number">1.24.</span> <span class="toc-text">（24）启动nginx 启动php-fpm 开放防火墙iptables 80端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（25）浏览器访问："><span class="toc-number">1.25.</span> <span class="toc-text">（25）浏览器访问：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#拓展"><span class="toc-number">2.</span> <span class="toc-text">拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-关于-etc-init-d"><span class="toc-number">2.1.</span> <span class="toc-text">1.关于/etc/init.d</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-关于-etc-rc-local"><span class="toc-number">2.2.</span> <span class="toc-text">2.关于/etc/rc.local</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考链接-1、-centos-6-5-搭建lnmp环境"><span class="toc-number">2.3.</span> <span class="toc-text">参考链接 1、 centos 6.5 搭建lnmp环境</span></a></li></ol></li></ol>
		
		</div>
		
		<p>LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。<br>Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo等。<br>Nginx是一个高性能的HTTP和反向代理服务器，也是一个IMAP/POP3/SMTP代理服务器。<br>Mysql是一个小型关系型数据库管理系统。<br>PHP是一种在服务器端执行的嵌入HTML文档的脚本语言。<br>这四种软件均为免费开源软件，组合到一起，成为一个免费、高效、扩展性强的网站服务系统。</p>
<h2 id="1、centos-6-5-X86-64-VMware下编译安装搭建lnmp，架构web环境"><a href="#1、centos-6-5-X86-64-VMware下编译安装搭建lnmp，架构web环境" class="headerlink" title="1、centos 6.5 X86_64 VMware下编译安装搭建lnmp，架构web环境"></a>1、centos 6.5 X86_64 VMware下编译安装搭建lnmp，架构web环境</h2><p>&emsp;建议安装顺序：</p>
<p>&emsp;MySQL——-》》编译PHP—-》》编译nginx</p>
<h3 id="（1）检查编译安装环境"><a href="#（1）检查编译安装环境" class="headerlink" title="（1）检查编译安装环境"></a>（1）检查编译安装环境</h3><h4 id="emsp-查看httpd、mysql、php是否安装"><a href="#emsp-查看httpd、mysql、php是否安装" class="headerlink" title="&emsp;#查看httpd、mysql、php是否安装"></a>&emsp;#查看httpd、mysql、php是否安装</h4><h4 id="emsp-root-localhost-rpm-q-httpd-mysql-php"><a href="#emsp-root-localhost-rpm-q-httpd-mysql-php" class="headerlink" title="&emsp;[root@localhost ~]#rpm -q httpd mysql php"></a>&emsp;[root@localhost ~]#rpm -q httpd mysql php</h4><h4 id="emsp-如果已安装则卸载"><a href="#emsp-如果已安装则卸载" class="headerlink" title="&emsp;#如果已安装则卸载:"></a>&emsp;#如果已安装则卸载:</h4><h4 id="emsp-root-localhost-rpm-e-httpd-–nodeps"><a href="#emsp-root-localhost-rpm-e-httpd-–nodeps" class="headerlink" title="&emsp;[root@localhost ~]#rpm -e httpd –nodeps"></a>&emsp;[root@localhost ~]#rpm -e httpd –nodeps</h4><h4 id="emsp-root-localhost-rpm-e-mysql-–nodeps"><a href="#emsp-root-localhost-rpm-e-mysql-–nodeps" class="headerlink" title="&emsp;[root@localhost ~]#rpm -e mysql –nodeps"></a>&emsp;[root@localhost ~]#rpm -e mysql –nodeps</h4><h4 id="emsp-root-localhost-rpm-e-php-–nodeps"><a href="#emsp-root-localhost-rpm-e-php-–nodeps" class="headerlink" title="&emsp;[root@localhost ~]#rpm -e php –nodeps"></a>&emsp;[root@localhost ~]#rpm -e php –nodeps</h4><h4 id="emsp-删除相关文件"><a href="#emsp-删除相关文件" class="headerlink" title="&emsp;#删除相关文件"></a>&emsp;#删除相关文件</h4><h4 id="emsp-find-name-php-mysql-nginx"><a href="#emsp-find-name-php-mysql-nginx" class="headerlink" title="&emsp;find / -name php mysql nginx"></a>&emsp;find / -name php mysql nginx</h4><h4 id="emsp-rm-rf"><a href="#emsp-rm-rf" class="headerlink" title="&emsp;rm -rf *"></a>&emsp;rm -rf <em>*</em></h4><h3 id="（2）安装解决依赖关系"><a href="#（2）安装解决依赖关系" class="headerlink" title="（2）安装解决依赖关系"></a>（2）安装解决依赖关系</h3><pre><code>yum install -y wget gcc gcc-c++ autoconf libjpeg libjpeg-devel perl perl* perl-CPAN libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers png jpeg autoconf gcc cmake make gcc-c++ gcc ladp ldap* ncurses ncurses-devel zlib zlib-devel zlib-static pcre pcre-devel pcre-static openssl openssl-devel perl libtoolt openldap-devel libxml2-devel ntpdate cmake gd* gd2 ImageMagick-devel jpeg jpeg* pcre-dev* fontconfig libpng libxml2 zip unzip gzip
</code></pre><p>yum install -y wget gcc gcc-c++ autoconf libjpeg libjpeg-devel perl perl* perl-CPAN libpng libpng-devel freetype </p>
<p>freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel </p>
<p>ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl </p>
<p>openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers png jpeg autoconf gcc cmake </p>
<p>make gcc-c++ gcc ladp ldap* ncurses ncurses-devel zlib zlib-devel zlib-static pcre pcre-devel pcre-static </p>
<p>openssl openssl-devel perl libtoolt openldap-devel libxml2-devel ntpdate cmake gd* gd2 ImageMagick-devel jpeg </p>
<p>jpeg<em> pcre-dev</em> fontconfig libpng libxml2 zip unzip gzip</p>
<h3 id="（3）安装mysql-5-5-53"><a href="#（3）安装mysql-5-5-53" class="headerlink" title="（3）安装mysql-5.5.53"></a>（3）安装mysql-5.5.53</h3><p>下载mysql-5.5.53.tar.gz</p>
<p>groupadd mysql</p>
<p>useradd mysql -g mysql</p>
<p>tar -zxvf mysql-5.5.30.tar.gz</p>
<p>cd mysql-5.5.30</p>
<p>cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</p>
<p>-DMYSQL_UNIX_ADDR=/tmp/mysql.sock \</p>
<p>-DEXTRA_CHARSETS=all \</p>
<p>-DDEFAULT_CHARSET=utf8 \</p>
<p>-DDEFAULT_COLLATION=utf8_general_ci \</p>
<p>-DWITH_EXTRA_CHARSETS:STRING=utf8,gbk \</p>
<p>-DWITH_INNOBASE_STORAGE_ENGINE=1 \</p>
<p>-DWITH_READLINE=1 \</p>
<p>-DENABLED_LOCAL_INFILE=1 \</p>
<p>-DMYSQL_DATADIR=/data/mysql/ \</p>
<p>-DMYSQL_USER=mysql \</p>
<p>-DMYSQL_TCP_PORT=3306    </p>
<pre><code>cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_UNIX_ADDR=/tmp/mysql.sock -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING=utf8,gbk -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DENABLED_LOCAL_INFILE=1 -DMYSQL_DATADIR=/data/mysql/ -DMYSQL_USER=mysql -DMYSQL_TCP_PORT=3306
</code></pre><p>make &amp;&amp; make install</p>
<p>mkdir -p /data/mysql</p>
<p>chown mysql.mysql -R /data/mysql</p>
<p>mv /etc/my.cnf /etc/my.cnf-old</p>
<p>cp support-files/my-medium.cnf /etc/my.cnf</p>
<p>chmod 755 scripts/mysql_install_db</p>
<p>scripts/mysql_install_db  –user=mysql  –basedir=/usr/local/mysql –datadir=/data/mysql/</p>
<p>cp support-files/mysql.server /etc/init.d/mysqld</p>
<p>chmod 755 /etc/init.d/mysqld</p>
<p>chkconfig mysqld on</p>
<p>service mysqld start</p>
<p>设置mysql的root密码为123456</p>
<p>/usr/local/mysql/bin/mysqladmin -u root password ‘123456’</p>
<h3 id="（4）安装php的扩展库：libiconv"><a href="#（4）安装php的扩展库：libiconv" class="headerlink" title="（4）安装php的扩展库：libiconv"></a>（4）安装php的扩展库：libiconv</h3><p>tar zxvf libiconv-1.13.tar.gz</p>
<p>cd libiconv-1.13/</p>
<p>./configure –prefix=/usr/local</p>
<p>make &amp;&amp; make install</p>
<h3 id="（5）安装php扩展库：libmcrypt"><a href="#（5）安装php扩展库：libmcrypt" class="headerlink" title="（5）安装php扩展库：libmcrypt"></a>（5）安装php扩展库：libmcrypt</h3><p>tar zxvf libmcrypt-2.5.8.tar.gz</p>
<p>cd libmcrypt-2.5.8/</p>
<p>./configure</p>
<p>make &amp;&amp; make install</p>
<p>/sbin/ldconfig</p>
<h4 id="注：这里不要退出去了。"><a href="#注：这里不要退出去了。" class="headerlink" title="注：这里不要退出去了。"></a>注：这里不要退出去了。</h4><p>cd libltdl/</p>
<p>./configure –enable-ltdl-install</p>
<p>make &amp;&amp; make install</p>
<h3 id="（6）-安装php扩展库：mhash"><a href="#（6）-安装php扩展库：mhash" class="headerlink" title="（6） 安装php扩展库：mhash"></a>（6） 安装php扩展库：mhash</h3><p>tar zxvf mhash-0.9.9.9.tar.gz</p>
<p>cd mhash-0.9.9.9/</p>
<p>./configure</p>
<p>make &amp;&amp; make install</p>
<h3 id="（7）-做库的软连接："><a href="#（7）-做库的软连接：" class="headerlink" title="（7） 做库的软连接："></a>（7） 做库的软连接：</h3><p>ln -s /usr/local/lib/libmcrypt.la /usr/lib/libmcrypt.la</p>
<p>ln -s /usr/local/lib/libmcrypt.so /usr/lib/libmcrypt.so</p>
<p>ln -s /usr/local/lib/libmcrypt.so.4 /usr/lib/libmcrypt.so.4</p>
<p>ln -s /usr/local/lib/libmcrypt.so.4.4.8 /usr/lib/libmcrypt.so.4.4.8</p>
<p>ln -s /usr/local/lib/libmhash.a /usr/lib/libmhash.a</p>
<p>ln -s /usr/local/lib/libmhash.la /usr/lib/libmhash.la</p>
<p>ln -s /usr/local/lib/libmhash.so /usr/lib/libmhash.so</p>
<p>ln -s /usr/local/lib/libmhash.so.2 /usr/lib/libmhash.so.2</p>
<p>ln -s /usr/local/lib/libmhash.so.2.0.1 /usr/lib/libmhash.so.2.0.1</p>
<p>ln -s /usr/lib64/libldap* /usr/lib/</p>
<h3 id="8-安装php扩展包：mcrypt"><a href="#8-安装php扩展包：mcrypt" class="headerlink" title="(8) 安装php扩展包：mcrypt"></a>(8) 安装php扩展包：mcrypt</h3><p>tar zxvf mcrypt-2.6.8.tar.gz</p>
<p>cd mcrypt-2.6.8/</p>
<p>/sbin/ldconfig</p>
<p>./configure</p>
<p>make &amp;&amp; make install</p>
<h3 id="9-安装php-5-4-21："><a href="#9-安装php-5-4-21：" class="headerlink" title="(9) 安装php-5.4.21："></a>(9) 安装php-5.4.21：</h3><p>tar -zxvf php-5.4.21.tar.gz</p>
<p>cd php-5.4.21</p>
<p> ./configure –prefix=/usr/local/php –with-config-file-path=/usr/local/php/etc –with-mysql=/usr/local/mysql </p>
<p>–with-mysqli=/usr/local/mysql/bin/mysql_config –with-iconv-dir=/usr/local –with-freetype-dir –with-jpeg-dir </p>
<p>–with-png-dir –with-zlib –with-gd –enable-gd-native-ttf –with-libxml-dir=/usr –enable-xml –disable-rpath </p>
<p>–enable-discard-path –enable-safe-mode –enable-bcmath –enable-shmop –enable-sysvsem –enable-inline-</p>
<p>optimization –with-curl –with-curlwrappers –enable-mbregex –enable-fastcgi –enable-fpm –enable-force-cgi-</p>
<p>redirect –enable-mbstring –with-mcrypt –with-openssl –with-mhash –enable-pcntl –enable-sockets –with-ldap </p>
<p>–with-ldap-sasl –with-xmlrpc –enable-zip –enable-soap –without-pear</p>
<hr>
<p>编译报错：<br>configure: error: Don’t know how to define struct flock on this system, set –enable-opcache=no</p>
<p>解决： 安装 yum groupinstall “Development Tools” </p>
<p>重新编译</p>
<p>configure: WARNING: unrecognized options: –enable-discard-path, –enable-safe-mode, –with-curlwrappers, –enable-fastcgi, –enable-force-cgi-redirect</p>
<p>如果加的参数有不支持的，提示比如：configure: WARNING: unrecognized options: –enable-discard-path, –enable-safe-mode, –enable-fastcgi, –enable-force-cgi-redirect</p>
<p>说明上述这些参数废弃了。</p>
<hr>
<p>ln -s /usr/local/mysql/lib/libmysqlclient.so.18 /usr/lib64/</p>
<p>make ZEND_EXTRA_LIBS=’-liconv’</p>
<p>make install</p>
<p>cp -f php.ini-production /usr/local/php/etc/php.ini</p>
<p>ln -s /usr/local/php/etc/php.ini /usr/local/php/php.ini</p>
<p>cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</p>
<h3 id="10-安装php扩展库：memcache"><a href="#10-安装php扩展库：memcache" class="headerlink" title="(10) 安装php扩展库：memcache"></a>(10) 安装php扩展库：memcache</h3><p>tar zxvf memcache-2.2.5.tgz</p>
<p>cd memcache-2.2.5/</p>
<p>/usr/local/php/bin/phpize</p>
<p>./configure –with-php-config=/usr/local/php/bin/php-config</p>
<p>make &amp;&amp; make install</p>
<h3 id="11-安装php加速：eaccelerator"><a href="#11-安装php加速：eaccelerator" class="headerlink" title="(11) 安装php加速：eaccelerator"></a>(11) 安装php加速：eaccelerator</h3><p>tar -zxvf eaccelerator-eaccelerator-42067ac.tar.gz</p>
<p>cd eaccelerator-eaccelerator-42067ac</p>
<p>/usr/local/php/bin/phpize</p>
<p>./configure –enable-eaccelerator=shared –with-php-config=/usr/local/php/bin/php-config</p>
<p>make &amp;&amp; make install</p>
<p>注：这里安装使用的是php5.6，eaccelerator并不兼容，则略过不安装</p>
<h3 id="（12）-修改php-ini增加memcache-ea等软件信息"><a href="#（12）-修改php-ini增加memcache-ea等软件信息" class="headerlink" title="（12） 修改php.ini增加memcache,ea等软件信息"></a>（12） 修改php.ini增加memcache,ea等软件信息</h3><p>添加memcache库的位置：</p>
<p>vim /usr/local/php/php.ini</p>
<p>;extension_dir = “/usr/local/php/lib/php/extensions/no-debug-non-zts-20100525”<br>(该目录下为安装的扩展.so文件,单个加载.so，否则pdo模板无法加载)</p>
<p>extension = “memcache.so”</p>
<p>extension = “pdo_mysql.so”</p>
<p>extension = “imagick.so”</p>
<h3 id="（13）安装php扩展库-PDO-MYSQL"><a href="#（13）安装php扩展库-PDO-MYSQL" class="headerlink" title="（13）安装php扩展库:PDO_MYSQL"></a>（13）安装php扩展库:PDO_MYSQL</h3><p>tar zxvf PDO_MYSQL-1.0.2.tgz</p>
<p>cd PDO_MYSQL-1.0.2/</p>
<p>/usr/local/php/bin/phpize</p>
<p>./configure –with-php-config=/usr/local/php/bin/php-config –with-pdo-mysql=/usr/local/mysql</p>
<p>ln -s /usr/local/mysql/include/* /usr/local/include/</p>
<p>make &amp;&amp; make install</p>
<h3 id="（14）安装ImageMagick服务"><a href="#（14）安装ImageMagick服务" class="headerlink" title="（14）安装ImageMagick服务"></a>（14）安装ImageMagick服务</h3><p>tar zxvf ImageMagick.tar.gz</p>
<p>cd ImageMagick-6.5.1-2/</p>
<p>./configure &amp;&amp; make &amp;&amp; make install</p>
<h3 id="（15）安装php扩展库：imagick"><a href="#（15）安装php扩展库：imagick" class="headerlink" title="（15）安装php扩展库：imagick"></a>（15）安装php扩展库：imagick</h3><p>tar zxvf imagick-3.1.2.tgz</p>
<p>cd imagick-3.1.2/</p>
<p>/usr/local/php/bin/phpize</p>
<p>ln -s /usr/local/include/ImageMagick-6 /usr/local/include/ImageMagick</p>
<p>./configure –with-php-config=/usr/local/php/bin/php-config</p>
<p>make &amp;&amp; make install</p>
<h3 id="（16）添加WWW用户，为系统运行nginx专用用户："><a href="#（16）添加WWW用户，为系统运行nginx专用用户：" class="headerlink" title="（16）添加WWW用户，为系统运行nginx专用用户："></a>（16）添加WWW用户，为系统运行nginx专用用户：</h3><p>/usr/sbin/groupadd www</p>
<p>/usr/sbin/useradd -g www www</p>
<p>mkdir -p /var/log/nginx</p>
<p>chmod +w /var/log/nginx</p>
<p>chown -R www:www /var/log/nginx</p>
<p>mkdir -p /data0/www</p>
<p>chmod +w /data0/www</p>
<p>chown -R www:www /data0/www</p>
<h3 id="（17）修改php-fpm-conf的配置："><a href="#（17）修改php-fpm-conf的配置：" class="headerlink" title="（17）修改php-fpm.conf的配置："></a>（17）修改php-fpm.conf的配置：</h3><p>vim /usr/local/php/etc/php-fpm.conf</p>
<h4 id="去掉-更改-配置文件中的"><a href="#去掉-更改-配置文件中的" class="headerlink" title="去掉/更改 配置文件中的;"></a>去掉/更改 配置文件中的;</h4><p>pm.max_children = 64</p>
<p>pm.start_servers = 20</p>
<p>pm.min_spare_servers = 5</p>
<p>pm.max_spare_servers = 35</p>
<p>pm.max_requests = 1024</p>
<p>user = www</p>
<p>group = www</p>
<h4 id="检查语法是否正确"><a href="#检查语法是否正确" class="headerlink" title="检查语法是否正确"></a>检查语法是否正确</h4><p>/usr/local/php/sbin/php-fpm -t</p>
<p>NOTICE: configuration file /usr/local/php/etc/php-fpm.conf test is successful</p>
<p>看到上面的信息 证明php配置文件正常，可以启动了。</p>
<h3 id="（18）-添加环境变量："><a href="#（18）-添加环境变量：" class="headerlink" title="（18） 添加环境变量："></a>（18） 添加环境变量：</h3><p>echo “export PATH=\$PATH:/usr/local/php/sbin/“ &gt;&gt;/etc/profile</p>
<p>echo “export PATH=\$PATH:/usr/local/php/bin/“ &gt;&gt;/etc/profile</p>
<p>. /etc/profile</p>
<pre><code>注意：这里最后一步报错-bash: ./etc/profile: Permission denied

原因是指令 . /etc/profile 点和斜杠之间应该是有空格的，这里漏掉了
</code></pre><h3 id="（19）安装nginx的-pcre"><a href="#（19）安装nginx的-pcre" class="headerlink" title="（19）安装nginx的 pcre"></a>（19）安装nginx的 pcre</h3><p>卸载PCRE</p>
<p>rpm -qa pcre</p>
<p>rpm -e –nodeps pcre</p>
<p>tar -zxvf pcre2-10.20.tar.gz</p>
<p>cd pcre2-10.20 &amp;&amp; ./configure –prefix=/usr/local/pcre &amp;&amp; make &amp;&amp; make install</p>
<pre><code>注意：此处configure出错
grep: error while loading shared libraries: libpcre.so.0: cannot open shared object file: No such file or directory
原因是libpcre.so.0文件没有了

解决方法：

改用yum源安装 yum install pcre
</code></pre><h3 id="（20）编译安装-nginx"><a href="#（20）编译安装-nginx" class="headerlink" title="（20）编译安装 nginx"></a>（20）编译安装 nginx</h3><p>tar -zxvf nginx-1.10.1.tar.gz</p>
<p>cd nginx-1.10.1/</p>
<p>./configure –user=www –group=www –prefix=/usr/local/nginx –sbin-path=/usr/local/nginx/sbin/nginx –conf-</p>
<p>path=/usr/local/nginx/conf/nginx.conf –with-http_stub_status_module –with-http_ssl_module –with-</p>
<p>pcre=/usr/local/pcre –lock-path=/var/run/nginx.lock –pid-path=/var/run/nginx.pid</p>
<p>make &amp;&amp; make install</p>
<pre><code>注意：make 报错
make -f objs/Makefile
make[1]: Entering directory `/home/ferry/www/service-file/nginx-1.10.1&apos;
cd /usr/local/pcre \
    &amp;&amp; if [ -f Makefile ]; then make distclean; fi \
    &amp;&amp; CC=&quot;cc&quot; CFLAGS=&quot;-O2 -fomit-frame-pointer -pipe &quot; \
    ./configure --disable-shared 
/bin/sh: line 2: ./configure: No such file or directory
make[1]: *** [/usr/local/pcre/Makefile] Error 127
make[1]: Leaving directory `/home/ferry/www/service-file/nginx-1.10.1&apos;
make: *** [build] Error 2

解决：--with-pcre=DIR 是指 pcre 的源码目录，而不是 pcre 的安装目录
所以修改--with-pcre=/usr/local/pcre 为 --with-pcre=/home/ferry/www/service-file/pcre2-10.20

再报错
cc: /home/ferry/www/service-file/pcre2-10.20/.libs/libpcre.a: No such file or directory
make[1]: *** [objs/nginx] Error 1
make[1]: Leaving directory `/home/ferry/www/service-file/nginx-1.10.1&apos;
make: *** [build] Error 2

解决方案：

mkdir -p /home/ferry/www/service-file/pcre2-10.20/.libs
cp /usr/lib/libpcre.a /home/ferry/www/service-file/pcre2-10.20/libpcre.a
cp /usr/lib/libpcre.a /home/ferry/www/service-file/pcre2-10.20/libpcre.la
cp /usr/lib/libpcre.a /home/ferry/www/service-file/pcre2-10.20/.libs/libpcre.a
cp /usr/lib/libpcre.a /home/ferry/www/service-file/pcre2-10.20/.libs/libpcre.la
</code></pre><p>编译成功</p>
<h3 id="（21）修改nginx配置文件"><a href="#（21）修改nginx配置文件" class="headerlink" title="（21）修改nginx配置文件"></a>（21）修改nginx配置文件</h3><p>user www;</p>
<p>events {</p>
<p>use epoll;</p>
<p>worker_connections  1024;</p>
<p>}</p>
<pre><code>#注意 把/scripti改为$document_root$  不然就是 file not found                                                     
</code></pre><p>location ~ .php$ {</p>
<p>root           html;</p>
<p>fastcgi_pass   127.0.0.1:9000;</p>
<p>fastcgi_index  index.php;</p>
<p>fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</p>
<p>include        fastcgi_params;</p>
<p>}</p>
<h3 id="（22）写一个php的测试文件：phpinfo"><a href="#（22）写一个php的测试文件：phpinfo" class="headerlink" title="（22）写一个php的测试文件：phpinfo"></a>（22）写一个php的测试文件：phpinfo</h3><p>cat &gt;&gt;/usr/local/nginx/html/index.php&lt;&lt;EOF</p>
<p>&lt;?php             </p>
<p>phpinfo();          </p>
<p>?&gt;            </p>
<p>EOF</p>
<h3 id="（23）添加开机启动"><a href="#（23）添加开机启动" class="headerlink" title="（23）添加开机启动:"></a>（23）添加开机启动:</h3><p>echo “/usr/local/php/sbin/php-fpm” &gt;&gt; /etc/rc.local</p>
<p>echo “/usr/local/nginx/sbin/nginx” &gt;&gt; /etc/rc.local</p>
<p>echo “/etc/init.d/mysqld restart” &gt;&gt; /etc/rc.local</p>
<h3 id="（24）启动nginx-启动php-fpm-开放防火墙iptables-80端口"><a href="#（24）启动nginx-启动php-fpm-开放防火墙iptables-80端口" class="headerlink" title="（24）启动nginx 启动php-fpm 开放防火墙iptables 80端口"></a>（24）启动nginx 启动php-fpm 开放防火墙iptables 80端口</h3><h3 id="（25）浏览器访问："><a href="#（25）浏览器访问：" class="headerlink" title="（25）浏览器访问："></a>（25）浏览器访问：</h3><p><a href="http://ip/index.php" target="_blank" rel="external">http://ip/index.php</a></p>
<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><h3 id="1-关于-etc-init-d"><a href="#1-关于-etc-init-d" class="headerlink" title="1.关于/etc/init.d"></a>1.关于/etc/init.d</h3><p>/etc/init.d目录包含许多系统各种服务的启动和停止脚本</p>
<h3 id="2-关于-etc-rc-local"><a href="#2-关于-etc-rc-local" class="headerlink" title="2.关于/etc/rc.local"></a>2.关于/etc/rc.local</h3><p>该脚本是在系统初始化级别脚本运行之后再执行的，因此可以安全地在里面添加你想在系统启动之后执行的脚本。</p>
<h3 id="参考链接-1、-centos-6-5-搭建lnmp环境"><a href="#参考链接-1、-centos-6-5-搭建lnmp环境" class="headerlink" title="参考链接 1、 centos 6.5 搭建lnmp环境"></a>参考链接 1、 <a href="http://blog.csdn.net/u010098331/article/details/50749587" target="_blank" rel="external">centos 6.5 搭建lnmp环境</a></h3><p>2 下载所有使用到的软件：（13个）</p>
<p>wget <a href="http://ftp.gnu.org/gnu/libiclsonv/libiconv-1.13.tar.gz" target="_blank" rel="external">http://ftp.gnu.org/gnu/libiclsonv/libiconv-1.13.tar.gz</a></p>
<p>手动下载 <a href="https://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/" target="_blank" rel="external">https://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/</a> </p>
<p>wget <a href="http://jaist.dl.sourceforge.NET/project/mcrypt/MCrypt/2.6.8/mcrypt-2.6.8.tar.gz" target="_blank" rel="external">http://jaist.dl.sourceforge.NET/project/mcrypt/MCrypt/2.6.8/mcrypt-2.6.8.tar.gz</a></p>
<p>wget <a href="http://jaist.dl.sourceforge.Net/project/mhash/mhash/0.9.9.9/mhash-0.9.9.9.tar.gz" target="_blank" rel="external">http://jaist.dl.sourceforge.Net/project/mhash/mhash/0.9.9.9/mhash-0.9.9.9.tar.gz</a></p>
<p>wget <a href="http://vps.googlecode.com/files/memcache-2.2.5.tgz" target="_blank" rel="external">http://vps.googlecode.com/files/memcache-2.2.5.tgz</a></p>
<p>wget <a href="http://vps.googlecode.com/files/PDO_MYSQL-1.0.2.tgz" target="_blank" rel="external">http://vps.googlecode.com/files/PDO_MYSQL-1.0.2.tgz</a></p>
<p>wget <a href="http://pecl.php.net/get/imagick-3.1.2.tgz" target="_blank" rel="external">http://pecl.php.net/get/imagick-3.1.2.tgz</a></p>
<p>wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.21.tar.gz</p>
<p>wget <a href="http://netcologne.dl.sourceforge.net/project/mysql.mirror/MySQL%205.5.30/mysql-5.5.30.tar.gz（链接已失效，改为使用Sohu的镜像源）" target="_blank" rel="external">http://netcologne.dl.sourceforge.net/project/mysql.mirror/MySQL%205.5.30/mysql-5.5.30.tar.gz（链接已失效，改为使用Sohu的镜像源）</a></p>
<p>wget <a href="http://mirror.aarnet.edu.au/pub/imagemagick/ImageMagick-6.9.8-0.tar.gz" target="_blank" rel="external">http://mirror.aarnet.edu.au/pub/imagemagick/ImageMagick-6.9.8-0.tar.gz</a></p>
<p>wget <a href="http://pecl.php.net/get/imagick-3.1.2.tgz" target="_blank" rel="external">http://pecl.php.net/get/imagick-3.1.2.tgz</a></p>
<p>wget <a href="http://us3.php.net/get/php-5.4.21.tar.gz/from/cn2.php.net/mirror" target="_blank" rel="external">http://us3.php.net/get/php-5.4.21.tar.gz/from/cn2.php.net/mirror</a></p>
<p>wget <a href="http://soft.vpser.net/web/eaccelerator/eaccelerator-eaccelerator-42067ac.tar.gz" target="_blank" rel="external">http://soft.vpser.net/web/eaccelerator/eaccelerator-eaccelerator-42067ac.tar.gz</a></p>
<p>wget <a href="http://nginx.org/download/nginx-1.4.0.tar.gz" target="_blank" rel="external">http://nginx.org/download/nginx-1.4.0.tar.gz</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://github.ouqunfu.com/2017/03/22/搭建LNMP环境.html" data-title="搭建LNMP环境 | 麦高稻香的博客" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/03/22/使用thinkphp5开发项目.html" title="使用thinkphp5开发项目">
  <strong>上一篇：</strong><br/>
  <span>
  使用thinkphp5开发项目</span>
</a>
</div>


<div class="next">
<a href="/2017/03/22/搭建Samba服务.html"  title="搭建Samba服务">
 <strong>下一篇：</strong><br/> 
 <span>搭建Samba服务
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、centos-6-5-X86-64-VMware下编译安装搭建lnmp，架构web环境"><span class="toc-number">1.</span> <span class="toc-text">1、centos 6.5 X86_64 VMware下编译安装搭建lnmp，架构web环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#（1）检查编译安装环境"><span class="toc-number">1.1.</span> <span class="toc-text">（1）检查编译安装环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-查看httpd、mysql、php是否安装"><span class="toc-number">1.1.1.</span> <span class="toc-text"> #查看httpd、mysql、php是否安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-q-httpd-mysql-php"><span class="toc-number">1.1.2.</span> <span class="toc-text"> [root@localhost ~]#rpm -q httpd mysql php</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-如果已安装则卸载"><span class="toc-number">1.1.3.</span> <span class="toc-text"> #如果已安装则卸载:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-e-httpd-–nodeps"><span class="toc-number">1.1.4.</span> <span class="toc-text"> [root@localhost ~]#rpm -e httpd –nodeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-e-mysql-–nodeps"><span class="toc-number">1.1.5.</span> <span class="toc-text"> [root@localhost ~]#rpm -e mysql –nodeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-root-localhost-rpm-e-php-–nodeps"><span class="toc-number">1.1.6.</span> <span class="toc-text"> [root@localhost ~]#rpm -e php –nodeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-删除相关文件"><span class="toc-number">1.1.7.</span> <span class="toc-text"> #删除相关文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-find-name-php-mysql-nginx"><span class="toc-number">1.1.8.</span> <span class="toc-text"> find / -name php mysql nginx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#emsp-rm-rf"><span class="toc-number">1.1.9.</span> <span class="toc-text"> rm -rf *</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（2）安装解决依赖关系"><span class="toc-number">1.2.</span> <span class="toc-text">（2）安装解决依赖关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（3）安装mysql-5-5-53"><span class="toc-number">1.3.</span> <span class="toc-text">（3）安装mysql-5.5.53</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（4）安装php的扩展库：libiconv"><span class="toc-number">1.4.</span> <span class="toc-text">（4）安装php的扩展库：libiconv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（5）安装php扩展库：libmcrypt"><span class="toc-number">1.5.</span> <span class="toc-text">（5）安装php扩展库：libmcrypt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注：这里不要退出去了。"><span class="toc-number">1.5.1.</span> <span class="toc-text">注：这里不要退出去了。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（6）-安装php扩展库：mhash"><span class="toc-number">1.6.</span> <span class="toc-text">（6） 安装php扩展库：mhash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（7）-做库的软连接："><span class="toc-number">1.7.</span> <span class="toc-text">（7） 做库的软连接：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-安装php扩展包：mcrypt"><span class="toc-number">1.8.</span> <span class="toc-text">(8) 安装php扩展包：mcrypt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-安装php-5-4-21："><span class="toc-number">1.9.</span> <span class="toc-text">(9) 安装php-5.4.21：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-安装php扩展库：memcache"><span class="toc-number">1.10.</span> <span class="toc-text">(10) 安装php扩展库：memcache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-安装php加速：eaccelerator"><span class="toc-number">1.11.</span> <span class="toc-text">(11) 安装php加速：eaccelerator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（12）-修改php-ini增加memcache-ea等软件信息"><span class="toc-number">1.12.</span> <span class="toc-text">（12） 修改php.ini增加memcache,ea等软件信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（13）安装php扩展库-PDO-MYSQL"><span class="toc-number">1.13.</span> <span class="toc-text">（13）安装php扩展库:PDO_MYSQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（14）安装ImageMagick服务"><span class="toc-number">1.14.</span> <span class="toc-text">（14）安装ImageMagick服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（15）安装php扩展库：imagick"><span class="toc-number">1.15.</span> <span class="toc-text">（15）安装php扩展库：imagick</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（16）添加WWW用户，为系统运行nginx专用用户："><span class="toc-number">1.16.</span> <span class="toc-text">（16）添加WWW用户，为系统运行nginx专用用户：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（17）修改php-fpm-conf的配置："><span class="toc-number">1.17.</span> <span class="toc-text">（17）修改php-fpm.conf的配置：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#去掉-更改-配置文件中的"><span class="toc-number">1.17.1.</span> <span class="toc-text">去掉/更改 配置文件中的;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检查语法是否正确"><span class="toc-number">1.17.2.</span> <span class="toc-text">检查语法是否正确</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（18）-添加环境变量："><span class="toc-number">1.18.</span> <span class="toc-text">（18） 添加环境变量：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（19）安装nginx的-pcre"><span class="toc-number">1.19.</span> <span class="toc-text">（19）安装nginx的 pcre</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（20）编译安装-nginx"><span class="toc-number">1.20.</span> <span class="toc-text">（20）编译安装 nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（21）修改nginx配置文件"><span class="toc-number">1.21.</span> <span class="toc-text">（21）修改nginx配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（22）写一个php的测试文件：phpinfo"><span class="toc-number">1.22.</span> <span class="toc-text">（22）写一个php的测试文件：phpinfo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（23）添加开机启动"><span class="toc-number">1.23.</span> <span class="toc-text">（23）添加开机启动:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（24）启动nginx-启动php-fpm-开放防火墙iptables-80端口"><span class="toc-number">1.24.</span> <span class="toc-text">（24）启动nginx 启动php-fpm 开放防火墙iptables 80端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（25）浏览器访问："><span class="toc-number">1.25.</span> <span class="toc-text">（25）浏览器访问：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#拓展"><span class="toc-number">2.</span> <span class="toc-text">拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-关于-etc-init-d"><span class="toc-number">2.1.</span> <span class="toc-text">1.关于/etc/init.d</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-关于-etc-rc-local"><span class="toc-number">2.2.</span> <span class="toc-text">2.关于/etc/rc.local</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考链接-1、-centos-6-5-搭建lnmp环境"><span class="toc-number">2.3.</span> <span class="toc-text">参考链接 1、 centos 6.5 搭建lnmp环境</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  

  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="麦高稻香">麦高稻香</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
